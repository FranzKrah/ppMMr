{
    "collab_server" : "",
    "contents" : "################################################\n## This code is part of the Rpackage ppMMr    ##\n## Franz-S. Krah; Leonie Schmid               ##\n## 24 - 05 - 2018                             ##\n################################################\n\n#' Frist step after MotionMeerkat: Delete non-target hits\n#' @description Removes putative movement detected by MotionMeerkat which is outside the user-devinded target area (e.g. flower)\n#' @param path a character string specifying the path of the motion detection project with folders being MotionMeerkat folders\n#' @return does not return, but saves to project folder, see \\link{read.motion.table}\n#' @export\n\n\nremove_non_target <- function(path){\n\n  dirs <- list.dirs(path)\n  dirs <- dirs[grep(\"\\\\d*[A-Z]{2}\", dirs)]\n\n  for(i in 1:length(dirs)){\n    if(length(grep(\"updated\", list.files(dirs[i])))>0){\n      cat(i, \"Frames already updated \\n\")\n      next\n    }else{\n      find_hits(fold = dirs[i], path = path)\n      cat(i, \"Frames now updated \\n\")\n    }\n  }\n\n  if(length(grep(\"updated\", list.files(dirs))) == length(dirs)){\n\n    updated <- list.files(dirs, recursive = TRUE, full.names = TRUE)\n    updated <- updated[grep(\"updated\", updated)]\n\n    updated <- lapply(updated, read.table, sep =\";\", header = TRUE)\n    updated <- data.frame(do.call(rbind, updated))\n    date <- Sys.Date()\n    write.table(updated, file = paste0(path, \"/motion_table_\", date, \".csv\"),\n      row.names = FALSE, sep =\";\")\n    cat(\"Motion table written to \", path)\n  }\n}\n\n",
    "created" : 1524571461488.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "341543596",
    "id" : "80FE02B3",
    "lastKnownWriteTime" : 1524589761,
    "last_content_update" : 1524589761992,
    "path" : "~/Documents/R/pkgs/ppMMr/R/remove_non_target.R",
    "project_path" : "R/remove_non_target.R",
    "properties" : {
        "tempName" : "Untitled7"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}